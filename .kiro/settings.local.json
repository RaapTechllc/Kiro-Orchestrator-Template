{
  "$schema": "https://kiro.dev/schemas/settings.json",
  "comment": "Kiro CLI settings with Ralph loop hooks",
  
  "hooks": {
    "Stop": [
      {
        "description": "Ralph loop stop hook - prevents premature exit",
        "hooks": [
          {
            "type": "command",
            "command": ".kiro/hooks/ralph-stop.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "description": "Log tool usage for debugging",
        "matcher": "*",
        "hooks": [
          {
            "type": "command", 
            "command": "echo \"[$(date -Iseconds)] Tool: $KIRO_TOOL_NAME\" >> .kiro/logs/tool-usage.log"
          }
        ]
      }
    ]
  },
  
  "permissions": {
    "allow": [
      "Bash(*)",
      "Read(*)",
      "Write(.kiro/*)",
      "Write(src/*)",
      "Write(tests/*)",
      "Write(PROGRESS.md)",
      "Write(PLAN.md)"
    ],
    "deny": [
      "Write(.git/*)",
      "Write(.env*)",
      "Bash(rm -rf *)"
    ]
  },
  
  "agents": {
    "default": "orchestrator",
    "available": [
      "orchestrator",
      "ralph-master",
      "code-surgeon",
      "test-architect",
      "frontend-designer"
    ]
  },
  
  "environment": {
    "NODE_ENV": "development",
    "KIRO_MAX_ITERATIONS": "20",
    "KIRO_COMPLETION_PHRASE": "<promise>DONE</promise>"
  }
}
